jQuery(function(a){var T=a(document.body),U=a("#yith_wcaf_general_referral_cod"),E=a("#yith_wcaf_referral_var_name"),V=a("#yith_wcaf_history_cookie_enable"),F=a("#yith_wcaf_history_cookie_name"),t=a("#yith_wcaf_history_make_cookie_expire"),u=a("#yith_wcaf_history_cookie_expire"),W=a("#yith_wcaf_commission_persistent_calculation"),G=a("#yith_wcaf_persistent_rate"),H=a("#yith_wcaf_avoid_referral_change"),X=a("#yith_wcaf_referral_make_cookie_expire"),I=a("#yith_wcaf_referral_cookie_expire"),Y=a("#yith_wcaf_referral_registration_show_terms_field"),
    J=a("#yith_wcaf_referral_registration_terms_label"),K=a("#yith_wcaf_referral_registration_terms_anchor_url"),L=a("#yith_wcaf_referral_registration_terms_anchor_text"),Z=a("#yith_wcaf_coupon_enable"),z=a("#yith_wcaf_coupon_show_section"),M=a("#yith_wcaf_coupon_limit_section"),N=a("#yith_wcaf_payment_pending_notify_admin"),aa=a("#yith_wcaf_payment_type"),m=a("#yith_wcaf_payment_amount_mode"),n=a("#yith_wcaf_payment_date"),h=a("#yith_wcaf_payment_pay_only_old_commissions"),A=a("#yith_wcaf_payment_commission_age"),
    p=a("#yith_wcaf_payment_default_gateway"),q=a("#yith_wcaf_payment_threshold"),k=a("#yith_wcaf_payment_require_invoice"),B=a("#yith_wcaf_payment_invoice_mode"),v=a("#yith_wcaf_payment_invoice_example"),w=a("#yith_wcaf_payment_invoice_company_section"),x=a("#yith_wcaf_payment_invoice_fields"),y=a("#yith_wcaf_payment_invoice_template"),l=a("#yith_wcaf_payment_invoice_show_terms_field"),O=a("#yith_wcaf_payment_invoice_terms_label"),P=a("#yith_wcaf_payment_invoice_terms_anchor_url"),Q=a("#yith_wcaf_payment_invoice_terms_anchor_text"),
    ba=a("#yith_wcaf_click_enabled"),R=a("#yith_wcaf_click_resolution"),C=a("#yith_wcaf_click_auto_delete"),D=a("#yith_wcaf_click_auto_delete_expiration");U.on("change",function(){"query_string"==a(this).val()?E.parents("tr").show():E.parents("tr").hide()}).change();V.on("change",function(){a(this).is(":checked")?(F.parents("tr").show(),t.parents("tr").show(),t.is(":checked")&&u.parents("tr").show()):(F.parents("tr").hide(),u.parents("tr").hide(),t.parents("tr").hide())}).change();t.on("change",function(){a(this).is(":checked")?
    u.parents("tr").show():u.parents("tr").hide()}).change();W.on("change",function(){a(this).is(":checked")?(G.parents("tr").show(),H.parents("tr").show()):(G.parents("tr").hide(),H.parents("tr").hide())}).change();X.on("change",function(){a(this).is(":checked")?I.parents("tr").show():I.parents("tr").hide()}).change();Y.on("change",function(){a(this).is(":checked")?(J.parents("tr").show(),K.parents("tr").show(),L.parents("tr").show()):(J.parents("tr").hide(),K.parents("tr").hide(),L.parents("tr").hide())}).change();
  Z.on("change",function(){a(this).is(":checked")?(z.closest("tr").show().end().change(),N.closest("tr").show()):(z.closest("tr").hide().end().change(),N.closest("tr").hide())}).change();z.on("change",function(){var b=a(this);b.is(":checked")&&b.is(":visible")?M.closest("tr").show():M.closest("tr").hide()}).change();aa.on("change",function(){var b=a(this).val();"manually"==b?(m.parents("tr").hide(),p.parents("tr").hide(),n.parents("tr").hide(),h.parents("tr").hide().end().change(),A.parents("tr").hide(),
      q.parents("tr").hide(),k.parents("tr").hide().end().change(),l.parents("tr").hide().end().change()):"automatically_on_threshold"==b?(m.parents("tr").hide(),p.parents("tr").show(),n.parents("tr").hide(),h.parents("tr").show().end().change(),q.parents("tr").show(),k.parents("tr").hide().end().change(),l.parents("tr").hide().end().change()):"automatically_on_date"==b?(m.parents("tr").hide(),p.parents("tr").show(),n.parents("tr").show(),h.parents("tr").show().end().change(),q.parents("tr").hide(),k.parents("tr").hide().end().change(),
      l.parents("tr").hide().end().change()):"automatically_on_both"==b?(m.parents("tr").hide(),p.parents("tr").show(),n.parents("tr").show(),h.parents("tr").show().end().change(),q.parents("tr").show(),k.parents("tr").hide().end().change(),l.parents("tr").hide().end().change()):"automatically_every_day"==b?(m.parents("tr").hide(),p.parents("tr").show(),n.parents("tr").hide(),h.parents("tr").show().end().change(),q.parents("tr").hide(),k.parents("tr").hide().end().change(),l.parents("tr").hide().end().change()):
      "let_user_request"==b&&(m.parents("tr").show(),p.parents("tr").hide(),n.parents("tr").hide(),h.parents("tr").hide(),q.parents("tr").show(),k.parents("tr").show().end().change(),l.parents("tr").show().end().change())}).change();k.on("change",function(){var b=a(this),c=b.is(":checked");b=b.is(":visible");c&&b?B.parents("tr").show().end().change():B.parents("tr").hide().end().change()}).change();B.on("change",function(){var b=a(this),c=b.val();b.is(":visible")?"upload"==c?(v.parents("tr").show(),w.parents("tr").hide(),
      x.parents("tr").hide(),y.parents("tr").hide()):"generate"==c?(v.parents("tr").hide(),w.parents("tr").show(),x.parents("tr").show(),y.parents("tr").show()):"both"==c&&(v.parents("tr").show(),w.parents("tr").show(),x.parents("tr").show(),y.parents("tr").show()):(v.parents("tr").hide(),w.parents("tr").hide(),x.parents("tr").hide(),y.parents("tr").hide())}).change();l.on("change",function(){var b=a(this),c=b.is(":visible");b.is(":checked")&&c?(O.parents("tr").show(),P.parents("tr").show(),Q.parents("tr").show()):
      (O.parents("tr").hide(),P.parents("tr").hide(),Q.parents("tr").hide())}).change();h.on("change",function(){var b=a(this);b.is(":checked")&&b.is(":visible")?A.parents("tr").show():A.parents("tr").hide()}).change();ba.on("change",function(){a(this).is(":checked")?(R.parents("tr").show(),C.change().parents("tr").show()):(R.parents("tr").hide(),C.parents("tr").hide(),D.parents("tr").hide())}).change();C.on("change",function(){a(this).is(":checked")?D.parents("tr").show():D.parents("tr").hide()}).change();
  T.on("wc_backbone_modal_response",function(b,c,d){"yith-wcaf-message"===c&&"undefined"!==typeof d.url&&(b=d.url,b.length?("undefined"!==typeof d.message&&d.message&&(b=b+"&message="+encodeURI(d.message)),window.location=b):(b=a("#yith_wcaf_panel_affiliate").children("form"),b.length&&(b.append(a("<input/>",{type:"hidden",name:"message",value:d.message})),b.submit())))});a(".variable-description").on("change",function(){var b=a(this),c=b.next(".description").find("[data-value]");b=c.filter('[data-value="'+
      b.val()+'"]');c.hide();b.length?b.show():c.first().show()}).change();var S=yith_wcaf.labels.view_template,ca=yith_wcaf.labels.hide_template;a("a.toggle_editor").text(S).on("click",function(b){var c=a(this);b.preventDefault();c.text(c.hasClass("open")?S:ca);c.toggleClass("open").closest(" .template").find(".editor").slideToggle()});a("a.delete_template").click(function(){return window.confirm(yith_wcaf.labels.confirm_template_delete)?!0:!1});a(".editor textarea").change(function(){var b=a(this).attr("data-name");
    b&&a(this).attr("name",b)});a(".yith-affiliates-update-commission").on("click",function(b){var c=a(this),d=c.parents("tr"),e=c.data("affiliate_id");d=d.find(".column-rate input").val();b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},data:{action:"yith_wcaf_update_affiliate_commission",affiliate_id:e,rate:d},dataType:"json",method:"POST",complete:function(){c.unblock()},success:function(f){},url:ajaxurl})});a(".yith-affiliates-delete-commission").on("click",
      function(b){var c=a(this),d=c.parents("tr"),e=d.parents("tbody"),f=c.data("affiliate_id");b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},data:{action:"yith_wcaf_delete_affiliate_commission",affiliate_id:f},dataType:"json",method:"POST",complete:function(){c.unblock()},success:function(g){d.remove();0==e.find("tr").length&&e.html(yith_wcaf.empty_row)},url:ajaxurl})});a(".yith-products-update-commission").on("click",function(b){var c=
      a(this),d=c.parents("tr"),e=c.data("product_id");d=d.find(".column-rate input").val();b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},data:{action:"yith_wcaf_update_product_commission",product_id:e,rate:d},dataType:"json",method:"POST",complete:function(){c.unblock()},success:function(f){},url:ajaxurl})});a(".yith-products-delete-commission").on("click",function(b){var c=a(this),d=c.parents("tr"),e=d.parents("tbody"),f=c.data("product_id");
    b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},data:{action:"yith_wcaf_delete_product_commission",product_id:f},dataType:"json",method:"POST",complete:function(){c.unblock()},success:function(g){d.remove();0==e.find("tr").length&&e.html(yith_wcaf.empty_row)},url:ajaxurl})});a("#yith_wcaf_commission_notes").on("click","a.add_note",function(b){var c=a(this),d=c.parents("#yith_wcaf_commission_notes"),e=d.find("ul"),f=d.find("textarea");
    d=f.val();var g=a("#commission_id").val();b.preventDefault();d&&a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{commission_id:g,note_content:d,action:"yith_wcaf_add_commission_note"},method:"POST",success:function(r){r.template&&e.prepend(r.template);0<e.find("li").length&&e.find("li.no_notes").hide();f.val("")},url:ajaxurl})}).on("click","a.delete_note",function(b){var c=a(this),d=c.parents("#yith_wcaf_commission_notes").find("ul"),
      e=c.parents("li");c=e.attr("rel");b.preventDefault();c&&a.ajax({beforeSend:function(){e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){e.unblock()},data:{note_id:c,action:"yith_wcaf_delete_commission_note"},method:"POST",success:function(f){e.remove();0==d.find("li").not(".no_notes").length&&d.find("li.no_notes").show()},url:ajaxurl})});a("#yith_wcaf_payment_notes").on("click","a.add_note",function(b){var c=a(this),d=c.parents("#yith_wcaf_payment_notes"),e=d.find("ul"),
      f=d.find("textarea");d=f.val();var g=a("#payment_id").val();b.preventDefault();d&&a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{payment_id:g,note_content:d,action:"yith_wcaf_add_payment_note"},method:"POST",success:function(r){r.template&&e.prepend(r.template);0<e.find("li").length&&e.find("li.no_notes").hide();f.val("")},url:ajaxurl})}).on("click","a.delete_note",function(b){var c=a(this),d=c.parents("#yith_wcaf_payment_notes").find("ul"),
      e=c.parents("li");c=e.attr("rel");b.preventDefault();c&&a.ajax({beforeSend:function(){e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){e.unblock()},data:{note_id:c,action:"yith_wcaf_delete_payment_note"},method:"POST",success:function(f){e.remove();0==d.find("li").not(".no_notes").length&&d.find("li.no_notes").show()},url:ajaxurl})});a("#yith_wcaf_panel_affiliate").on("click","a.button.ban, a.button.disable",function(b){var c=a(this);b.preventDefault();if(c.hasClass("ban"))var d=
      yith_wcaf.labels.ban_message;else c.hasClass("disable")&&(d=yith_wcaf.labels.rejected_message);c.WCBackboneModal({template:"yith-wcaf-message",variable:{title:d,url:c.attr("href")}});return!1}).on("click","#doaction, #doaction2",function(b){var c=a(this),d=c.prev(),e=!1;if("ban"===d.val()){e=!0;var f=yith_wcaf.labels.ban_message;var g="ban_message"}"disable"===d.val()&&(e=!0,f=yith_wcaf.labels.rejected_message,g="reject_message");e&&(b.preventDefault(),c.WCBackboneModal({template:"yith-wcaf-message",
    variable:{title:f,name:g,url:""}}))});a(".edit_address_button").on("click",function(b){var c=a(this);b.preventDefault();c.parent().nextAll(".address").toggle();c.parent().nextAll(".edit_address").toggle()});a(".date-picker-field, .date-picker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0});a(".user-edit-php").find("#enabled").on("change",function(){var b=a(this);"-1"===b.val()?b.closest("table").find("#reject_message").closest("tr").show():b.closest("table").find("#reject_message").closest("tr").hide()}).change().end().find("#banned").on("change",
      function(){var b=a(this);b.is(":checked")?b.closest("table").find("#ban_message").closest("tr").show():b.closest("table").find("#ban_message").closest("tr").hide()}).change();0!=yith_wcaf.tabs_badges.commissions&&a(".nav-tab-wrapper").find('[href*="tab=commissions"]').append(' <span class="pending-count">'+yith_wcaf.tabs_badges.commissions+"</span>");0!=yith_wcaf.tabs_badges.affiliates&&a(".nav-tab-wrapper").find('[href*="tab=affiliates"]').append(' <span class="pending-count">'+yith_wcaf.tabs_badges.affiliates+
      "</span>");0!=yith_wcaf.tabs_badges.payments&&a(".nav-tab-wrapper").find('[href*="tab=payments"]').append(' <span class="pending-count">'+yith_wcaf.tabs_badges.payments+"</span>")});